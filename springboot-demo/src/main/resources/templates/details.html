<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>商品详情</title>
  <link rel="stylesheet" type="text/css" href="./lib/layui/css/main.css">
  <link rel="stylesheet" type="text/css" href="./lib/layui/css/layui.css">
  <script type="text/javascript" src="./lib/layui/layui.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
</head>
<body>
<style>
  .detailimage{
    width: 775px;
    height: 500px;
    float: right;
  }
  .recommend{
    width: 290px;
    height: 260px;
  }
  .recommendspan{
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
    width: 200px;
  }
</style>

<div class="site-nav-bg" style="background:#f2f2f2;height: 30px;">
  <div class="site-nav w1200">
    <p class="sn-back-home">
      <i style="color:#b4b4b4" class="layui-icon layui-icon-home"></i>
      <a style="color:#b4b4b4" href="shopIndex.html">首页</a>
    </p>
    <div class="sn-quick-menu">
      <div class="login"><a id="loginA"style="color: #b4b4b4" href="userlogin.html">登录</a></div>
      <div class="sp-cart"><a style="color: #b4b4b4" href="myshopcart.html">购物车</a><span style="color:#fff">2</span></div>
    </div>
  </div>
</div>
<div style="height: 100px;border-bottom: 1px solid #c8baaa;">
  <img style="width: 100px;height: 65px;margin-top: 10px;margin-left: 0px;float:left;" src="logoimage.png"/>
  <div style="border: 2.4px solid rgb(255, 0, 54);width: 305px;height: 30px;float: right;margin-right: 140px;margin-top: 20px">
    <div class="defaultSearch">
      <button style="width: 80px;height: 30px;background:rgb(255, 0, 54);border: 0px;float: right;" id="J_SearchBtn" type="submit">
        搜索
        <s></s></button>
      <input type="text" style="height: 27px;width: 220px;float: left"/>
    </div>
  </div>
</div>



  <!--<div class="header">-->
    <!--<div class="headerLayout w1200">-->
    <!--</div>-->
  <!--</div>-->


  <div class="content content-nav-base datails-content">
    <div class="data-cont-wrap w1200">
      <div class="crumb">
        <a href="javascript:;">首页</a>
        <span>></span>
        <a href="javascript:;">所有商品</a>
        <span>></span>
        <a href="javascript:;">产品详情</a>
      </div>
      <div class="product-intro layui-clear">
        <div class="preview-wrap">
          <a href="javascript:;"><img id="goodimage" style="width:410px;height: 400px" src="生蚝.png"></a>
        </div>
        <div class="itemInfo-wrap">
          <div class="itemInfo">
            <!--<div id="goodId" hidden="hidden"></div>-->
            <div class="title">
              <h4 id="goodname">吉娜朵旗舰店N0号12只 法国生蚝 空运 进口 鲜活 原装木箱吉拉多 </h4>
              <span><i class="layui-icon layui-icon-rate-solid"></i>收藏</span>
            </div>
            <div class="summary">
              <p  class="reference"><span>参考价</span> <del id="goprice">￥280.00</del></p>
              <p  class="activity"><span>活动价</span><strong id="grprice" class="price"><i>￥</i>99.00</strong></p>
              <p class="address-box"><span>送&nbsp;&nbsp;&nbsp;&nbsp;至</span><strong class="address">江西&nbsp;&nbsp;南昌&nbsp;&nbsp;东湖区</strong></p>
            </div>
            <div class="choose-attrs">
              <div class="color layui-clear"><span class="title">库&nbsp;&nbsp;&nbsp;&nbsp;存</span> <div class="color-cont"><span id="gstore" class="btn">150</span></div></div>
              <div class="number layui-clear"><span class="title">数&nbsp;&nbsp;&nbsp;&nbsp;量</span><div class="number-cont"><span class="cut btn">-</span><input id="num" onkeyup="if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\D/g,'')}" onafterpaste="if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\D/g,'')}" maxlength="4" type="" name="" value="1"><span class="add btn">+</span></div></div>
            </div>
            <div class="choose-btns">
              <button style="background: #ff0036;border: 1px solid #ff0036;color: #fff" class="layui-btn layui-btn-primary purchase-btn">立刻购买</button>
              <button onclick="addCart()" style="background: #ffeded;border: 1px solid #ff0036;color: #ff0036" class="layui-btn  layui-btn-danger car-btn"><i class="layui-icon layui-icon-cart-simple"></i>加入购物车</button>
            </div>
          </div>
        </div>
      </div>
      <div class="layui-clear">
        <div class="aside">
          <h4>热销推荐</h4>
          <div class="item-list">
            <div class="item">
              <img class="recommend" src="金鲳鱼.jpg">
              <p class="recommendspan"><span >海捕金鲳鱼3条3斤装深海金昌鱼新鲜鲜活冷冻海鲜水产鲜活海鱼 </span><span class="pric">￥99.00</span></p>
            </div>
            <div class="item">
              <img class="recommend" src="黄花鱼.jpg">
              <p class="recommendspan"><span>GUOLIAN国联三去黄花鱼(2条装)1kg 海鲜水产 黄鱼 东海特产 </span><span class="pric">￥99.00</span></p>
            </div>
            <div class="item">
              <img class="recommend"src="秋刀鱼.jpg">
              <p class="recommendspan"><span >俄罗斯进口秋刀鱼500克 4条装 烧烤食材 秋刀鱼 海鲜 水产品 鱼 </span></p><span class="pric">￥99.00</span>
            </div>
          </div>
        </div>
        <div style="float: right;border: 0px solid rgba(0,0,0,0)" class="detail">
          <h4>详情</h4>
          <div class="item" style="border: 0px solid rgba(0,0,0,0)">
            <img class="detailimage" id="detailImage" src="秋刀鱼详情1.jpg">
            <!--<img class="detailimage"src="秋刀鱼详情2.jpg">-->
          </div>
        </div>
        <div style="width: 775px;float: right">
          <h4>评价</h4>
          <div class="layui-card" style="width: 775px;height: 90px;border-bottom: 1px solid #e3e3e3;position:relative">
            <p>价格实惠，很好吃，商家态度很好</p>
            <p style="float:right;">林勇彬</p>
            <p style="position:absolute;;left: 3px;bottom: 3px;color: rgb(204, 204, 204)">2019-6-30</p>
          </div>
          <div class="layui-card" style="width: 775px;height: 90px;border-bottom: 1px solid #e3e3e3;position:relative">
            <p>价格实惠，很好吃，商家态度很好</p>
            <p style="float:right;">林勇彬</p>
            <p style="position:absolute;;left: 3px;bottom: 3px;color: rgb(204, 204, 204)">2019-6-30</p>
          </div>
          <div class="layui-card" style="width: 775px;height: 90px;border-bottom: 1px solid #e3e3e3;position:relative">
            <p>价格实惠，很好吃，商家态度很好</p>
            <p style="float:right;">林勇彬</p>
            <p style="position:absolute;;left: 3px;bottom: 3px;color: rgb(204, 204, 204)">2019-6-30</p>
          </div>
          <div class="layui-card" style="width: 775px;height: 90px;border-bottom: 1px solid #e3e3e3;position:relative">
            <p>价格实惠，很好吃，商家态度很好</p>
            <p style="float:right;">林勇彬</p>
            <p style="position:absolute;;left: 3px;bottom: 3px;color: rgb(204, 204, 204)">2019-6-30</p>
          </div>
        </div>
      </div>
    </div>
  </div>
<script type="text/javascript">
  layui.config({
    base: '/js/' //你存放新模块的目录，注意，不是layui的模块目录
  }).use(['mm','jquery'],function(){
      var mm = layui.mm,$ = layui.$;
      var cur = $('.number-cont input').val();
      $('.number-cont .btn').on('click',function(){
        if($(this).hasClass('add')){
          cur++;
        }else{
          if(cur > 1){
            cur--;
          }  
        }
        $('.number-cont input').val(cur)
      })
      
  });
</script>
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.0.js">
</script>
<script>
  // 例如地址是http://localhost:8080/details.html?id=40003
  // 那么adress就是?id=40003,进行分割就可以取得id
  // alert(window.location.search)
  var adress=window.location.search.split("?");
  var ids=adress[1].split("=");
  var goodname=$('#goodname');
  var grprice=$('#grprice');
  var goprice=$("#goprice");
  var goodImage=$('#goodimage')
  var detailImage=$('#detailImage')
  var gstore=$('#gstore')
  $(function () {
    $.ajax({
      url:"/good/detail/"+ids[1],
      type:"get",
      dataType:"json",
      success:function (res) {
         goodname.text(res.gname)
         grprice.text("￥"+res.grprice)
         goprice.text("￥"+res.goprice)
        gstore.text(res.gstore)
        goodImage.attr("src",res.gpicture)
        detailImage.attr("src",res.detailImage)
      }
    })
  })
  function addCart(){
    var shoppingnum=$('#num').val()
    alert(localStorage.getItem("localUserId"))
    // console.log("ssss"+shoppingnum)
    $.ajax({
      url:"user/addCart/"+parseInt(localStorage.getItem("localUserId"))+"/"+ids[1]+"/"+shoppingnum,
      type:"get",
      dataType:"json",
      success:function (res) {
        alert(res)
      }
    })
  }
</script>
<script>
  $(function () {
    $('#loginA').text(localStorage.getItem("UserName"))
  })
</script>
</body>
</html>